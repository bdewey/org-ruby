<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />

  <title>Class: Orgmode::OutputBuffer</title>

  <link rel="stylesheet" href="../rdoc.css" type="text/css" media="screen" />

  <script src="../js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/thickbox-compressed.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="../js/darkfish.js" type="text/javascript" charset="utf-8"></script>

</head>
<body id="top" class="class">

  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../index.html">Home</a>
          <a href="../index.html#classes">Classes</a>
          <a href="../index.html#methods">Methods</a>
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li><a href="../lib/org-ruby/output_buffer_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/org-ruby/output_buffer.rb">lib/org-ruby/output_buffer.rb</a></li>
          
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">
      
      <!-- Parent Class -->
      <div id="parent-class-section" class="section">
        <h3 class="section-header">Parent</h3>
        
        <p class="link">Object</p>
        
      </div>
      

      

      

      
      <!-- Method Quickref -->
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li><a href="#method-c-new">::new</a></li>
          
          <li><a href="#method-i-3C-3C">#<<</a></li>
          
          <li><a href="#method-i-clear_accumulation_buffer-21">#clear_accumulation_buffer!</a></li>
          
          <li><a href="#method-i-current_mode">#current_mode</a></li>
          
          <li><a href="#method-i-current_mode_list-3F">#current_mode_list?</a></li>
          
          <li><a href="#method-i-enter_table-3F">#enter_table?</a></li>
          
          <li><a href="#method-i-exit_table-3F">#exit_table?</a></li>
          
          <li><a href="#method-i-get_next_headline_number">#get_next_headline_number</a></li>
          
          <li><a href="#method-i-list_indent_level">#list_indent_level</a></li>
          
          <li><a href="#method-i-pop_mode">#pop_mode</a></li>
          
          <li><a href="#method-i-prepare">#prepare</a></li>
          
          <li><a href="#method-i-preserve_whitespace-3F">#preserve_whitespace?</a></li>
          
          <li><a href="#method-i-push_mode">#push_mode</a></li>
          
        </ul>
      </div>
      

      
    </div>

    <div id="project-metadata">
      
      
      <div id="fileindex-section" class="section project-section">
        <h3 class="section-header">Files</h3>
        <ul>
        
          <li class="file"><a href="../History_txt.html">History.txt</a></li>
        
          <li class="file"><a href="../README_rdoc.html">README.rdoc</a></li>
        
          <li class="file"><a href="../announcement_txt.html">announcement.txt</a></li>
        
        </ul>
      </div>
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="../images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
        
          <li><a href="../Orgmode.html">Orgmode</a></li>
        
          <li><a href="../Orgmode/Headline.html">Orgmode::Headline</a></li>
        
          <li><a href="../Orgmode/HtmlOutputBuffer.html">Orgmode::HtmlOutputBuffer</a></li>
        
          <li><a href="../Orgmode/Line.html">Orgmode::Line</a></li>
        
          <li><a href="../Orgmode/OutputBuffer.html">Orgmode::OutputBuffer</a></li>
        
          <li><a href="../Orgmode/Parser.html">Orgmode::Parser</a></li>
        
          <li><a href="../Orgmode/RegexpHelper.html">Orgmode::RegexpHelper</a></li>
        
          <li><a href="../Orgmode/TextileOutputBuffer.html">Orgmode::TextileOutputBuffer</a></li>
        
          <li><a href="../OrgRuby.html">OrgRuby</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div>

  <div id="documentation">
    <h1 class="class">Orgmode::OutputBuffer</h1>

    <div id="description" class="description">
      
<p>The <a href="OutputBuffer.html">OutputBuffer</a> is used to accumulate
multiple lines of orgmode text, and then emit them to the output all in one
go. The class will do the final textile substitution for inline formatting
and add a newline character prior emitting the output.</p>

    </div><!-- description -->

    
    <div id="5Buntitled-5D" class="documentation-section">
      

      

      
      <!-- Constants -->
      <div id="constants-list" class="section">
        <h3 class="section-header">Constants</h3>
        <dl>
        
          <dt><a name="Modes">Modes</a></dt>
          
          <dd class="description"></dd>
          
        
        </dl>
      </div>
      

      
      <!-- Attributes -->
      <div id="attribute-method-details" class="method-section section">
        <h3 class="section-header">Attributes</h3>

        
        <div id="buffer-attribute-method" class="method-detail">
          <a name="buffer"></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">buffer</span><span
              class="attribute-access-type">[R]</span>
          </div>

          <div class="method-description">
          
          <p>This is the accumulation buffer. It’s a holding pen so consecutive lines
of the right type can get stuck together without intervening newlines.</p>
          
          </div>
        </div>
        
        <div id="buffer_mode-attribute-method" class="method-detail">
          <a name="buffer_mode"></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">buffer_mode</span><span
              class="attribute-access-type">[R]</span>
          </div>

          <div class="method-description">
          
          <p>This is the output mode of the accumulation buffer.</p>
          
          </div>
        </div>
        
        <div id="buffered_lines-attribute-method" class="method-detail">
          <a name="buffered_lines"></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">buffered_lines</span><span
              class="attribute-access-type">[R]</span>
          </div>

          <div class="method-description">
          
          <p>These are the <a href="Line.html">Line</a> objects that are currently in
the accumulation buffer.</p>
          
          </div>
        </div>
        
        <div id="headline_number_stack-attribute-method" class="method-detail">
          <a name="headline_number_stack"></a>
          
          <a name="headline_number_stack="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">headline_number_stack</span><span
              class="attribute-access-type">[RW]</span>
          </div>

          <div class="method-description">
          
          <p>This stack is used to do proper outline numbering of headlines.</p>
          
          </div>
        </div>
        
        <div id="output-attribute-method" class="method-detail">
          <a name="output"></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">output</span><span
              class="attribute-access-type">[R]</span>
          </div>

          <div class="method-description">
          
          <p>This is the overall output buffer</p>
          
          </div>
        </div>
        
        <div id="output_type-attribute-method" class="method-detail">
          <a name="output_type"></a>
          
          <a name="output_type="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">output_type</span><span
              class="attribute-access-type">[RW]</span>
          </div>

          <div class="method-description">
          
          <p>This is the current type of output being accumulated.</p>
          
          </div>
        </div>
        
      </div><!-- attribute-method-details -->
      

      <!-- Methods -->
      
      <div id="public-class-method-details" class="method-section section">
        <h3 class="section-header">Public Class Methods</h3>

      
        <div id="new-method" class="method-detail ">
          <a name="method-c-new"></a>

          
          <div class="method-heading">
            <span class="method-name">new</span><span
              class="method-args">(output)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Creates a new <a href="OutputBuffer.html">OutputBuffer</a> object that is
bound to an output object. The output will get flushed to =output=.</p>
            

            
            <div class="method-source-code" id="new-source">
<pre>
<span class="ruby-comment"># File lib/org-ruby/output_buffer.rb, line 34</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">output</span>)
  <span class="ruby-ivar">@output</span> = <span class="ruby-identifier">output</span>
  <span class="ruby-ivar">@buffer</span> = <span class="ruby-string">&quot;&quot;</span>
  <span class="ruby-ivar">@buffered_lines</span> = []
  <span class="ruby-ivar">@buffer_mode</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@output_type</span> = <span class="ruby-value">:start</span>
  <span class="ruby-ivar">@list_indent_stack</span> = []
  <span class="ruby-ivar">@paragraph_modifier</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@cancel_modifier</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-ivar">@mode_stack</span> = []
  <span class="ruby-ivar">@headline_number_stack</span> = []

  <span class="ruby-ivar">@logger</span> = <span class="ruby-constant">Logger</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">STDERR</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-constant">ENV</span>[<span class="ruby-string">'DEBUG'</span>] <span class="ruby-keyword">or</span> <span class="ruby-identifier">$DEBUG</span>
    <span class="ruby-ivar">@logger</span>.<span class="ruby-identifier">level</span> = <span class="ruby-constant">Logger</span><span class="ruby-operator">::</span><span class="ruby-constant">DEBUG</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@logger</span>.<span class="ruby-identifier">level</span> = <span class="ruby-constant">Logger</span><span class="ruby-operator">::</span><span class="ruby-constant">WARN</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-ivar">@re_help</span> = <span class="ruby-constant">RegexpHelper</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">push_mode</span>(<span class="ruby-value">:normal</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- new-source -->
            
          </div>

          

          
        </div><!-- new-method -->

      
      </div><!-- public-class-method-details -->
    
      <div id="public-instance-method-details" class="method-section section">
        <h3 class="section-header">Public Instance Methods</h3>

      
        <div id="3C-3C-method" class="method-detail ">
          <a name="method-i-3C-3C"></a>

          
          <div class="method-heading">
            <span class="method-name">&lt;&lt;</span><span
              class="method-args">(str)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Accumulate the string @str@.</p>
            

            
            <div class="method-source-code" id="3C-3C-source">
<pre>
<span class="ruby-comment"># File lib/org-ruby/output_buffer.rb, line 133</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-identifier">str</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@buffer_mode</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@buffer_mode</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">current_mode</span> <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Accumulation buffer is mixing modes: @buffer_mode == #{@buffer_mode}, current_mode == #{current_mode}&quot;</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@buffer_mode</span> = <span class="ruby-identifier">current_mode</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@buffer</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">str</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- 3C-3C-source -->
            
          </div>

          

          
        </div><!-- 3C-3C-method -->

      
        <div id="clear_accumulation_buffer-21-method" class="method-detail ">
          <a name="method-i-clear_accumulation_buffer-21"></a>

          
          <div class="method-heading">
            <span class="method-name">clear_accumulation_buffer!</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Flushes everything currently in the accumulation buffer into the  output
buffer. Derived classes must override this to actually move content into
the output buffer with the appropriate markup. This method just does common
bookkeeping cleanup.</p>
            

            
            <div class="method-source-code" id="clear_accumulation_buffer-21-source">
<pre>
<span class="ruby-comment"># File lib/org-ruby/output_buffer.rb, line 98</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">clear_accumulation_buffer!</span>
  <span class="ruby-ivar">@buffer</span> = <span class="ruby-string">&quot;&quot;</span>
  <span class="ruby-ivar">@buffer_mode</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@buffered_lines</span> = []
<span class="ruby-keyword">end</span></pre>
            </div><!-- clear_accumulation_buffer-21-source -->
            
          </div>

          

          
        </div><!-- clear_accumulation_buffer-21-method -->

      
        <div id="current_mode-method" class="method-detail ">
          <a name="method-i-current_mode"></a>

          
          <div class="method-heading">
            <span class="method-name">current_mode</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="current_mode-source">
<pre>
<span class="ruby-comment"># File lib/org-ruby/output_buffer.rb, line 59</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">current_mode</span>
  <span class="ruby-ivar">@mode_stack</span>.<span class="ruby-identifier">last</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- current_mode-source -->
            
          </div>

          

          
        </div><!-- current_mode-method -->

      
        <div id="current_mode_list-3F-method" class="method-detail ">
          <a name="method-i-current_mode_list-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">current_mode_list?</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="current_mode_list-3F-source">
<pre>
<span class="ruby-comment"># File lib/org-ruby/output_buffer.rb, line 63</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">current_mode_list?</span>
  (<span class="ruby-identifier">current_mode</span> <span class="ruby-operator">==</span> <span class="ruby-value">:ordered_list</span>) <span class="ruby-keyword">or</span> (<span class="ruby-identifier">current_mode</span> <span class="ruby-operator">==</span> <span class="ruby-value">:unordered_list</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- current_mode_list-3F-source -->
            
          </div>

          

          
        </div><!-- current_mode_list-3F-method -->

      
        <div id="enter_table-3F-method" class="method-detail ">
          <a name="method-i-enter_table-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">enter_table?</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Tests if we are entering a table mode.</p>
            

            
            <div class="method-source-code" id="enter_table-3F-source">
<pre>
<span class="ruby-comment"># File lib/org-ruby/output_buffer.rb, line 121</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">enter_table?</span>
  ((<span class="ruby-ivar">@output_type</span> <span class="ruby-operator">==</span> <span class="ruby-value">:table_row</span>) <span class="ruby-operator">||</span> (<span class="ruby-ivar">@output_type</span> <span class="ruby-operator">==</span> <span class="ruby-value">:table_header</span>) <span class="ruby-operator">||</span> (<span class="ruby-ivar">@output_type</span> <span class="ruby-operator">==</span> <span class="ruby-value">:table_separator</span>)) <span class="ruby-operator">&amp;&amp;</span>
    (<span class="ruby-identifier">current_mode</span> <span class="ruby-operator">!=</span> <span class="ruby-value">:table</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- enter_table-3F-source -->
            
          </div>

          

          
        </div><!-- enter_table-3F-method -->

      
        <div id="exit_table-3F-method" class="method-detail ">
          <a name="method-i-exit_table-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">exit_table?</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Tests if we are existing a table mode.</p>
            

            
            <div class="method-source-code" id="exit_table-3F-source">
<pre>
<span class="ruby-comment"># File lib/org-ruby/output_buffer.rb, line 127</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">exit_table?</span>
  ((<span class="ruby-ivar">@output_type</span> <span class="ruby-operator">!=</span> <span class="ruby-value">:table_row</span>) <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-ivar">@output_type</span> <span class="ruby-operator">!=</span> <span class="ruby-value">:table_header</span>) <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-ivar">@output_type</span> <span class="ruby-operator">!=</span> <span class="ruby-value">:table_separator</span>)) <span class="ruby-operator">&amp;&amp;</span>
    (<span class="ruby-identifier">current_mode</span> <span class="ruby-operator">==</span> <span class="ruby-value">:table</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- exit_table-3F-source -->
            
          </div>

          

          
        </div><!-- exit_table-3F-method -->

      
        <div id="get_next_headline_number-method" class="method-detail ">
          <a name="method-i-get_next_headline_number"></a>

          
          <div class="method-heading">
            <span class="method-name">get_next_headline_number</span><span
              class="method-args">(level)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Gets the next headline number for a given level. The intent is this
function is called sequentially for each headline that needs to get
numbered. It does standard outline numbering.</p>
            

            
            <div class="method-source-code" id="get_next_headline_number-source">
<pre>
<span class="ruby-comment"># File lib/org-ruby/output_buffer.rb, line 107</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_next_headline_number</span>(<span class="ruby-identifier">level</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Headline level not valid: #{level}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">level</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span>
  <span class="ruby-keyword">while</span> <span class="ruby-identifier">level</span> <span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@headline_number_stack</span>.<span class="ruby-identifier">length</span> <span class="ruby-keyword">do</span>
    <span class="ruby-ivar">@headline_number_stack</span>.<span class="ruby-identifier">push</span> <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">while</span> <span class="ruby-identifier">level</span> <span class="ruby-operator">&lt;</span> <span class="ruby-ivar">@headline_number_stack</span>.<span class="ruby-identifier">length</span> <span class="ruby-keyword">do</span>
    <span class="ruby-ivar">@headline_number_stack</span>.<span class="ruby-identifier">pop</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;Oops, shouldn't happen&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">level</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@headline_number_stack</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-ivar">@headline_number_stack</span>[<span class="ruby-ivar">@headline_number_stack</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>] <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
  <span class="ruby-ivar">@headline_number_stack</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;.&quot;</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- get_next_headline_number-source -->
            
          </div>

          

          
        </div><!-- get_next_headline_number-method -->

      
        <div id="list_indent_level-method" class="method-detail ">
          <a name="method-i-list_indent_level"></a>

          
          <div class="method-heading">
            <span class="method-name">list_indent_level</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Gets the current list indent level.</p>
            

            
            <div class="method-source-code" id="list_indent_level-source">
<pre>
<span class="ruby-comment"># File lib/org-ruby/output_buffer.rb, line 143</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">list_indent_level</span>
  <span class="ruby-ivar">@list_indent_stack</span>.<span class="ruby-identifier">length</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- list_indent_level-source -->
            
          </div>

          

          
        </div><!-- list_indent_level-method -->

      
        <div id="pop_mode-method" class="method-detail ">
          <a name="method-i-pop_mode"></a>

          
          <div class="method-heading">
            <span class="method-name">pop_mode</span><span
              class="method-args">(mode = nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="pop_mode-source">
<pre>
<span class="ruby-comment"># File lib/org-ruby/output_buffer.rb, line 72</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">pop_mode</span>(<span class="ruby-identifier">mode</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">m</span> = <span class="ruby-ivar">@mode_stack</span>.<span class="ruby-identifier">pop</span>
  <span class="ruby-ivar">@logger</span>.<span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;Modes don't match. Expected to pop #{mode}, but popped #{m}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">mode</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">mode</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">m</span>
  <span class="ruby-identifier">m</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- pop_mode-source -->
            
          </div>

          

          
        </div><!-- pop_mode-method -->

      
        <div id="prepare-method" class="method-detail ">
          <a name="method-i-prepare"></a>

          
          <div class="method-heading">
            <span class="method-name">prepare</span><span
              class="method-args">(line)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Prepares the output buffer to receive content from a line. As a side
effect, this may flush the current accumulated text.</p>
            

            
            <div class="method-source-code" id="prepare-source">
<pre>
<span class="ruby-comment"># File lib/org-ruby/output_buffer.rb, line 80</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">prepare</span>(<span class="ruby-identifier">line</span>)
  <span class="ruby-ivar">@logger</span>.<span class="ruby-identifier">debug</span> <span class="ruby-node">&quot;Looking at #{line.paragraph_type}: #{line.to_s}&quot;</span>
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">should_accumulate_output?</span>(<span class="ruby-identifier">line</span>) <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">flush!</span>
    <span class="ruby-identifier">maintain_list_indent_stack</span>(<span class="ruby-identifier">line</span>)
    <span class="ruby-ivar">@output_type</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">paragraph_type</span> 
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">push_mode</span>(<span class="ruby-value">:inline_example</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">inline_example?</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">current_mode</span> <span class="ruby-operator">!=</span> <span class="ruby-value">:inline_example</span>
  <span class="ruby-identifier">pop_mode</span>(<span class="ruby-value">:inline_example</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_mode</span> <span class="ruby-operator">==</span> <span class="ruby-value">:inline_example</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">line</span>.<span class="ruby-identifier">inline_example?</span>
  <span class="ruby-identifier">push_mode</span>(<span class="ruby-value">:table</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">enter_table?</span>
  <span class="ruby-identifier">pop_mode</span>(<span class="ruby-value">:table</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">exit_table?</span>
  <span class="ruby-ivar">@buffered_lines</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">line</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- prepare-source -->
            
          </div>

          

          
        </div><!-- prepare-method -->

      
        <div id="preserve_whitespace-3F-method" class="method-detail ">
          <a name="method-i-preserve_whitespace-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">preserve_whitespace?</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Test if we’re in an output mode in which whitespace is significant.</p>
            

            
            <div class="method-source-code" id="preserve_whitespace-3F-source">
<pre>
<span class="ruby-comment"># File lib/org-ruby/output_buffer.rb, line 148</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">preserve_whitespace?</span>
  <span class="ruby-identifier">mode_is_code</span> <span class="ruby-identifier">current_mode</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- preserve_whitespace-3F-source -->
            
          </div>

          

          
        </div><!-- preserve_whitespace-3F-method -->

      
        <div id="push_mode-method" class="method-detail ">
          <a name="method-i-push_mode"></a>

          
          <div class="method-heading">
            <span class="method-name">push_mode</span><span
              class="method-args">(mode)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="push_mode-source">
<pre>
<span class="ruby-comment"># File lib/org-ruby/output_buffer.rb, line 67</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">push_mode</span>(<span class="ruby-identifier">mode</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Not a recognized mode: #{mode}&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-constant">Modes</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">mode</span>)
  <span class="ruby-ivar">@mode_stack</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">mode</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- push_mode-source -->
            
          </div>

          

          
        </div><!-- push_mode-method -->

      
      </div><!-- public-instance-method-details -->
    
    </div><!-- 5Buntitled-5D -->
  

  </div><!-- documentation -->

  <div id="validator-badges">
    <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
    <p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
      Rdoc Generator</a> 2</small>.</p>
  </div>

</body>
</html>

